(()=>{"use strict";const e=function(e,t,o){var n;o&&(n=document.querySelector(o)),".consult"===t&&document.querySelectorAll(".button").forEach((function(e){"Проконсультироваться"===e.textContent&&e.classList.add("consult")}));var r=document.querySelector(".portfolio-slider-wrap").querySelectorAll(".item-hover"),i=function(e,t){var o=e.getBoundingClientRect().top;return t.y===o||t.y>o&&t.y<o+e.clientHeight},l=function(e,t){var o=e.getBoundingClientRect().left;return t.x===o||t.x>o&&t.x<o+e.clientWidth},c=document.querySelector(".slider-arrow-tablet-mobile_left svg"),s=document.querySelector(".slider-arrow-tablet-mobile_right svg");".portfolio-slider__slide-frame"===t&&window.innerWidth<900&&r.forEach((function(e){e.style.visibility="hidden",e.style.opacity=0}));var a=document.querySelector(e),u=a.querySelector(".close");document.addEventListener("click",(function(e){var o,r=e.target;if(".portfolio-slider__slide-frame"===t&&window.innerWidth<900){var d=i(c,e)&&l(c,e),p=i(s,e)&&l(s,e);o=r.closest(t)&&!d&&!p}else o=r.closest(t);o?(a.style.visibility="visible",n&&(n.style.display="block")):r===u?(a.style.visibility="hidden",n&&(n.style.display="none")):window.innerWidth<575&&r.classList.contains("close")&&(a.style.visibility="hidden")}))},t=function(){var e=function(e){var t=document.getElementById(e),o=t.querySelector(".checkbox__input"),n=t.querySelector(".checkbox__label"),r=document.querySelector(".popup-error"),i=document.querySelector(".popup-thank"),l=document.createElement("div");t.append(l);var c=t.querySelectorAll("input");document.addEventListener("click",(function(e){var t=e.target,o=i.querySelector(".close"),n=r.querySelector(".close");t!==o&&t!==n||(i.style.visibility="hidden",r.style.visibility="hidden")}));var s=function(){n.style.borderColor="#322823",i.style.visibility="hidden",r.style.visibility="hidden"},a=function(e){l.className="",r.style.visibility="visible",console.error(e),setTimeout(s,5e3)};t.addEventListener("submit",(function(e){if(e.preventDefault(),o.checked){n.style.borderColor="#322823",l.className="loader";var r=new FormData(t),u={};r.forEach((function(e,t){u[t]=e})),function(e){return fetch("./server.php",{method:"POST",header:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(u).then((function(e){if(200!==e.status)throw new Error("network status is not 200");l.className="",i.style.visibility="visible",c.forEach((function(e){e.value=""})),o.checked=!1,setTimeout(s,5e3)})).catch(a)}else n.style.borderColor="red",setTimeout((function(){n.style.borderColor="#322823"}),3e3)}))};e("feedback1"),e("feedback2"),e("feedback3"),e("feedback4"),e("feedback5"),e("feedback6")};var o,n,r,i,l,c,s,a,u,d,p,m,f,y,v,h,g,w,b,_;b=document.querySelector(".header-contacts__phone-number-accord a"),_=document.querySelector(".header-contacts__arrow"),document.addEventListener("click",(function(e){e.target.closest(".header-contacts__arrow")?(b.classList.toggle("opened"),_.classList.toggle("opened")):b.classList.contains("opened")&&(b.classList.remove("opened"),_.classList.remove("opened"))})),h=document.querySelector(".menu__icon"),g=document.querySelector(".popup-menu"),w=document.querySelector(".popup-dialog-menu"),window.addEventListener("resize",(function(){window.innerWidth<576?(w.style.webkitTransform="translate3d(0, -841px, 0)",w.style.transform="translate3d(0, -841px, 0)"):(w.style.webkitTransform="translate3d(645px, 0, 0)",w.style.transform="translate3d(645px, 0, 0)")})),document.addEventListener("click",(function(e){var t=e.target;t.closest(".menu__icon")?(h.classList.add("opened"),g.style.visibility="visible",w.style.webkitTransform="translate3d(0, 0, 0)",w.style.transform="translate3d(0, 0, 0)"):h.classList.contains("opened")&&(t.closest(".close-menu")||t===g||t.matches(".menu-link"))&&(h.classList.remove("opened"),g.style.visibility="hidden",window.innerWidth<576?(w.style.webkitTransform="translate3d(0, -841px, 0)",w.style.transform="translate3d(0, -841px, 0)"):(w.style.webkitTransform="translate3d(645px, 0, 0)",w.style.transform="translate3d(645px, 0, 0)"))})),y=/#(?=\D+)/g,v=[].slice.call(document.querySelectorAll('a[href*="#"]')),document.addEventListener("click",(function(e){var t=e.target;v.forEach((function(o){if(null!==o.href.match(y)&&t===o){e.preventDefault();var n=document.querySelector(o.getAttribute("href")).getBoundingClientRect().top+window.pageYOffset;if(0===n)var r=window.setInterval((function(){var e=window.pageYOffset;e>0?window.scrollTo(0,e-300):window.clearInterval(r)}),16);else var i=setInterval((function(){var e=n/20;e>window.pageYOffset-n&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,n),clearInterval(i))}),25)}}))})),f=document.querySelectorAll('[name="phone"]'),document.addEventListener("input",(function(e){var t=e.target;f.forEach((function(e){t===e&&(e.value=e.value.replace(/\D/g,""))}))})),maskPhone('[name="phone"]'),e(".popup-repair-types",".link-list"),e(".popup-privacy",".checkbox__descr span"),e(".popup-transparency",".transparency-item__img"),e(".popup-consultation",".consult"),e(".popup-portfolio",".portfolio-slider__slide-frame",".popup-portfolio-text"),e(".popup-transparency",".transparency-item__img"),m=function(e,t,o){var n,r,i,l=e.closest(o);if(l&&!e.closest(".formula-item-popup")){var c=e.getBoundingClientRect().top,s=e.textContent.trim().match(/\d+/g),a=String(s).slice(-1)-1;".formula-slider__slide"===o?(i=document.querySelectorAll(".formula-slider__slide"),n=document.querySelectorAll("".concat(o," .formula-item__icon")),r=document.querySelector("".concat(o," .formula-item-popup-").concat(s))):r=document.querySelector(".formula-item-popup-".concat(s)),c<r.clientHeight?(r.style.bottom="-".concat(r.clientHeight+10,"px"),r.classList.toggle("formula-popup-opened.down")):(r.style.bottom="90px",r.classList.remove("formula-popup-opened.down")),"toggle"===t&&(r.classList.toggle("formula-popup-opened"),l.classList.toggle("opened"),n[a].classList.toggle("opened"),i[a].classList.toggle("slide-opened"),console.log("slides[slideNumber]: ",i[a])),"remove"===t&&(r.classList.remove("formula-popup-opened"),l.classList.remove("opened"))}},window.innerWidth>1200?(document.addEventListener("mouseover",(function(e){var t=e.target;m(t,"toggle",".formula-item__icon")})),document.addEventListener("mouseout",(function(e){var t=e.target;m(t,"remove",".formula-item__icon")}))):document.addEventListener("click",(function(e){var t=e.target;m(t,"toggle",".formula-slider__slide")})),t(),t(),d=document.querySelector(".accordion"),(p=d.querySelectorAll(".title_block"))[0].classList.add("msg-active"),d.addEventListener("click",(function(e){var t=e.target;p.forEach((function(e){e.classList.remove("msg-active"),t===e&&e.classList.add("msg-active")}))})),(i=document.querySelector(".popup-repair-types")).querySelectorAll(".popup-repair-types-nav__item"),l=i.querySelector(".popup-repair-types-content__head-title"),c=i.querySelectorAll(".repair-types-name"),s=i.querySelectorAll(".repair-types-value.units"),a=i.querySelectorAll(".repair-types-value.cost"),i.querySelector(".popup-repair-types-content__head-date"),u=0,document.addEventListener("click",(function(e){var t,d=e.target;if(document.querySelector("#nav-arrow-popup-repair_left")){var p=document.querySelector(".nav-list-popup-repair");if(d.closest("#nav-arrow-popup-repair_right")){var m=p.children[0],f=m.cloneNode(!0);p.append(f),m.remove()}else if(d.closest("#nav-arrow-popup-repair_left")){var y=p.children[p.children.length-1],v=y.cloneNode(!0);p.prepend(v),y.remove()}}"visible"===i.style.visibility&&(t=l.textContent,d.closest(".popup-repair-types-nav__item")&&(t=function(e){return i.querySelectorAll(".popup-repair-types-nav__item").forEach((function(t){t.classList.remove("active"),e===t&&(t.classList.add("active"),l.textContent=t.textContent)})),l.textContent}(d))),fetch("../crm-backend/db.json").then((function(e){if(200!==e.status)throw new Error("network status is not 200");return e.json()})).then((function(e){o=new Map,n=new Map,r=new Map,e.forEach((function(e,i){e.type===t&&(u++,o.set(u,e.name),n.set(u,e.units),r.set(u,e.cost))})),u=0})).then((function(){c.forEach((function(e,t){t+1<o.size?(e.textContent="",e.parentNode.style.display=""):e.parentNode.style.display="none"})),o.forEach((function(e,t){c[t-1].textContent=e})),n.forEach((function(e,t){var o=String(e.match(/\D+/g)),n=String(e.match(/\d+/g));"null"===n&&(n=""),s[t-1].innerHTML="".concat(o,"<sup>").concat(n,"</sup>")})),r.forEach((function(e,t){a[t-1].textContent="".concat(e," руб.")}))})).catch((function(e){console.error(e)}))}))})();